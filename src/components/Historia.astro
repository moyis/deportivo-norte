---
import historyImg from '../assets/historia.webp';
---

<section id="historia" class="section bg-black" aria-labelledby="historia-heading">
  <div class="container">
    <div class="grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
      <!-- Contenido textual -->
      <div class="order-2 lg:order-1">
        <header class="mb-8">
          <span class="inline-block text-[#FFCC00] font-heading font-bold text-sm uppercase tracking-widest mb-4">
            Nuestra Historia
          </span>
          <h2 id="historia-heading" class="text-4xl md:text-5xl font-heading font-bold text-white mb-6">
            Más de 87 Años de Pasión por el Fútbol
          </h2>
        </header>

        <div class="space-y-6 text-gray-300 text-lg leading-relaxed">
          <p>
            El <strong class="text-white">Club Deportivo Norte</strong> fue fundado el 
            <strong class="text-[#FFCC00]">1 de abril de 1937</strong> en Mar del Plata, 
            provincia de Buenos Aires. Desde sus inicios en Ituzaingó al 3900, el club se convirtió 
            rápidamente en el corazón del barrio La Perla, un punto de encuentro para vecinos 
            y familias que compartían la pasión por el deporte.
          </p>
          <p>
            Durante la década del '60, el club vivió una época dorada con actividades sociales 
            que unían a toda la comunidad. Pero el momento de mayor gloria llegó en los años '80, 
            cuando el <strong class="text-white">Deportivo Norte</strong> conquistó el 
            <strong class="text-[#FFCC00]">bicampeonato de la Liga Marplatense de Fútbol 
            en 1987 y 1988</strong>, consolidándose como uno de los clubes más importantes de la ciudad.
          </p>
          <p>
            Hoy, nuestro equipo juega de local en el <strong class="text-white">Estadio Carlos H. Miori</strong>, 
            ubicado en la zona norte de Mar del Plata. La hinchada, conocida popularmente como 
            <strong class="text-[#FFCC00]">"La 90"</strong>, es reconocida por su fidelidad 
            y pasión en cada partido, acompañando al equipo en las buenas y en las malas.
          </p>
        </div>

        <!-- Destacados -->
        <div class="grid grid-cols-2 gap-6 mt-10 pt-8 border-t border-white/10">
          <div>
            <p class="text-3xl font-heading font-bold text-[#FFCC00]">1937</p>
            <p class="text-gray-400 text-sm uppercase tracking-wide">Año de Fundación</p>
          </div>
          <div>
            <p class="text-3xl font-heading font-bold text-[#FFCC00]">1987-88</p>
            <p class="text-gray-400 text-sm uppercase tracking-wide">Bicampeonato</p>
          </div>
          <div>
            <p class="text-3xl font-heading font-bold text-[#FFCC00]">La Perla</p>
            <p class="text-gray-400 text-sm uppercase tracking-wide">Barrio Histórico</p>
          </div>
          <div>
            <p class="text-3xl font-heading font-bold text-[#FFCC00]">"La 90"</p>
            <p class="text-gray-400 text-sm uppercase tracking-wide">Nuestra Hinchada</p>
          </div>
        </div>
      </div>

      <!-- Imagen/Visual -->
      <div class="order-1 lg:order-2">
        <figure class="relative">
          <div class="aspect-[4/5] bg-[#1A1A1A] overflow-hidden">
            <img 
              src={historyImg.src}
              alt="Dos camisetas del Club Deportivo Norte: pasado y presente"
              class="w-full h-full object-cover opacity-90"
              loading="lazy"
            />
          </div>
          <!-- Badge decorativo -->
          <div class="absolute -bottom-6 -left-6 bg-[#FFCC00] p-6 md:p-8">
            <p class="font-heading font-bold text-black text-4xl md:text-5xl">87+</p>
            <p class="font-heading font-bold text-black/70 text-sm uppercase">Años de Historia</p>
          </div>
        </figure>
      </div>
    </div>

    <!-- Carrusel de citas destacadas -->
    <div class="mt-20 pt-12 border-t border-white/10">
      <div class="quotes-carousel relative overflow-hidden">
        <!-- Flecha izquierda -->
        <button 
          class="quote-arrow quote-prev absolute left-0 top-1/2 -translate-y-1/2 z-10 w-12 h-12 flex items-center justify-center text-white/50 hover:text-[#FFCC00] transition-colors duration-300"
          aria-label="Cita anterior"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
          </svg>
        </button>

        <!-- Flecha derecha -->
        <button 
          class="quote-arrow quote-next absolute right-0 top-1/2 -translate-y-1/2 z-10 w-12 h-12 flex items-center justify-center text-white/50 hover:text-[#FFCC00] transition-colors duration-300"
          aria-label="Cita siguiente"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </button>

        <div class="quotes-track flex transition-transform duration-700 ease-in-out">
          <!-- Cita 1 - Gustavo Moya -->
          <blockquote class="quote-slide w-full flex-shrink-0 text-center px-4">
            <p class="text-2xl md:text-3xl font-heading font-bold text-white italic max-w-4xl mx-auto">
              "Deportivo Norte no es solo un club, es una familia. Es el lugar donde crecí, 
              donde hice amigos para toda la vida y donde aprendí lo que significa defender una camiseta."
            </p>
            <footer class="mt-6">
              <cite class="text-[#FFCC00] font-heading uppercase not-italic">— Gustavo Moya, hincha desde 1985</cite>
            </footer>
          </blockquote>

          <!-- Cita 2 - Celia Luminari -->
          <blockquote class="quote-slide w-full flex-shrink-0 text-center px-4">
            <p class="text-2xl md:text-3xl font-heading font-bold text-white italic max-w-4xl mx-auto">
              "Mi abuelo me llevó por primera vez a la cancha cuando tenía 6 años. 
              Hoy llevo a mis nietos. Eso es el Norte: generaciones unidas por los mismos colores."
            </p>
            <footer class="mt-6">
              <cite class="text-[#FFCC00] font-heading uppercase not-italic">— Celia Luminari, socia vitalicia</cite>
            </footer>
          </blockquote>

          <!-- Cita 3 - Lautaro Loo -->
          <blockquote class="quote-slide w-full flex-shrink-0 text-center px-4">
            <p class="text-2xl md:text-3xl font-heading font-bold text-white italic max-w-4xl mx-auto">
              "No importa si ganamos o perdemos, cada domingo estamos ahí. 
              Porque ser del Norte es un sentimiento que se lleva en el corazón, no en la tabla de posiciones."
            </p>
            <footer class="mt-6">
              <cite class="text-[#FFCC00] font-heading uppercase not-italic">— Lautaro Loo, integrante de La 90</cite>
            </footer>
          </blockquote>
        </div>

        <!-- Indicadores -->
        <div class="flex justify-center gap-3 mt-8">
          <button class="quote-dot w-3 h-3 rounded-full bg-white/30 transition-all duration-300 hover:bg-white/50" data-index="0" aria-label="Ver cita 1"></button>
          <button class="quote-dot w-3 h-3 rounded-full bg-white/30 transition-all duration-300 hover:bg-white/50" data-index="1" aria-label="Ver cita 2"></button>
          <button class="quote-dot w-3 h-3 rounded-full bg-white/30 transition-all duration-300 hover:bg-white/50" data-index="2" aria-label="Ver cita 3"></button>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const carousel = document.querySelector('.quotes-carousel') as HTMLElement;
    const track = document.querySelector('.quotes-track') as HTMLElement;
    const dots = document.querySelectorAll('.quote-dot');
    const prevBtn = document.querySelector('.quote-prev');
    const nextBtn = document.querySelector('.quote-next');
    const totalSlides = 3;
    let currentSlide = 0;
    let autoplayInterval: ReturnType<typeof setInterval>;
    let isPaused = false;

    function goToSlide(index: number) {
      currentSlide = index;
      if (track) {
        track.style.transform = `translateX(-${currentSlide * 100}%)`;
      }
      dots.forEach((dot, i) => {
        dot.classList.toggle('bg-[#FFCC00]', i === currentSlide);
        dot.classList.toggle('bg-white/30', i !== currentSlide);
      });
    }

    function nextSlide() {
      goToSlide((currentSlide + 1) % totalSlides);
    }

    function prevSlide() {
      goToSlide((currentSlide - 1 + totalSlides) % totalSlides);
    }

    function startAutoplay() {
      autoplayInterval = setInterval(nextSlide, 5000);
    }

    function stopAutoplay() {
      clearInterval(autoplayInterval);
    }

    function resetAutoplay() {
      stopAutoplay();
      if (!isPaused) {
        startAutoplay();
      }
    }

    // Pausar al hacer hover
    carousel?.addEventListener('mouseenter', () => {
      isPaused = true;
      stopAutoplay();
    });

    carousel?.addEventListener('mouseleave', () => {
      isPaused = false;
      startAutoplay();
    });

    // Click en indicadores
    dots.forEach((dot) => {
      dot.addEventListener('click', () => {
        const index = parseInt(dot.getAttribute('data-index') || '0');
        goToSlide(index);
        resetAutoplay();
      });
    });

    // Click en flechas
    prevBtn?.addEventListener('click', () => {
      prevSlide();
      resetAutoplay();
    });

    nextBtn?.addEventListener('click', () => {
      nextSlide();
      resetAutoplay();
    });

    // Inicializar
    goToSlide(0);
    startAutoplay();
  });
</script>
